---
title: "STA314: Assignment 1, Fall 2020"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message=F, warning=F)
```

# load packages
```{r}

library(imager)
library(tidyverse)
library(tidymodels)
library(sp)
library(scales)
library(cowplot)
library(dmc)
```

```{r }
source('functions.R') 
```

# load a image

Load the image that is from "./avatar.jpg".


```{r}
image_file_name = "./avatar.jpg"
```

![Original image](avatar.jpg)

\newpage

# process_image

To process the original image data, use the `kmeans` method to divide the R, G, and B data into k categories to obtain different category colors. 


Input:

- image_file_name - a PNG or JPEG image.
 
- out - the number of centres in the clustering

Output:

- cluster_info: a [list] that contain
 
 * the original output of the kclust calls,
 
 * the tidied clusters, their associated RGB values and their nearest DMC thread colour information in `result`.

```{r}
k_list = c(2:5)
cluster_info = process_image(image_file_name, k_list)
```


# scree_plot

Input:
  
- the element of function `process_image`.

Output:
  
- a graph

This function is mainly for drawing
```{r}
scree_plot(cluster_info[[2]])
```

# color_strips

This function gets the hex value corresponding to each category.

Input:

- the element of function `process_image`

Output:

- a dataframe: x,y,R,G,B,cluster,dmc,name,hex.

- a graph.

```{r}
k = 4
one_cluster_info = colour_strips(cluster_info[[2]][k-1,])
```


# make_pattern

Input:

- cluster_info - The output of process_image

- k - The chosen cluster size

- x_size - The (approximate) total number of possible stitches in the horizontal direction

- black_white - (logical) Print the pattern in black and white (TRUE) or colour (FALSE,default)

- background_colour - The colour of the background, which should not be stitched in the pattern. (Default is to not have a colour)

Output:

- A graph which denoted by `k, x_size, black_white,background_colour`.


Output the results of three different modes respectively

```{r fig.height=8, fig.width=8}
make_pattern(one_cluster_info, k = k, x_size = 50, black_white = FALSE, background_colour = NULL)
make_pattern(one_cluster_info, k = k, x_size = 50, black_white = TRUE, background_colour = NULL)
make_pattern(one_cluster_info, k = k, x_size = 50, black_white = FALSE, background_colour = "#000000")
```
















